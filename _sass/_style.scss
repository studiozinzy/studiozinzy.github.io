@import "../_sass/grid";

html {
  scroll-behavior: smooth;

  // Color variables
  --color-primary: #000;
  --color-text:  #000;
  --color-subtext: #9a9a9a;
  --color-link-internal: #000; 
  --color-link-external: #000; 
  --color-smoke: #dbdbdb;
  --color-snow: #f1f1f1;
  --color-border: var(--color-snow);
  --color-bg: #fbfbfb;
  --color-box-background: mix(--color-primary, white, 4%);
  --border-radius: 4px;
  --font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
}

@media (prefers-color-scheme: dark) {
  html {

    // Color variables
    --color-primary: #fff;
    --color-text:  #E5E9F2;
    --color-subtext: #8492A6; 
    --color-snow: #E0E6ED;
    --color-border: --color-snow;
    --color-bg: #12161b;
    --color-box-background: mix(--color-primary, white, 4%);
  }

}

body, html {
  font-size: 18px;
}
  
body {
  font-family: var(--font-family);
  background: var(--color-bg);
  box-sizing: content-box; 
  line-height: 1.7; 
  overflow-x: hidden;
  color: var(--color-text);
  font-size: 1rem; 
  -webkit-font-smoothing: antialiased;
  padding: 30px; 
  counter-reset: sidenote-counter; 
  @media (min-width: 600px) {
    padding: 60px; 
  } 
  @media (min-width: 768px) {
    padding: 0;
    margin: 200px auto;
    max-width: 600px;
  }
}

.break-out {
  position: relative;
  right: 0%;
  left: 0%;
  margin-left: -0vw;
  margin-right: -0vw;
  max-width: 100vw;
  width: 100vw;
}

time {
  display: block;
  color: var(--color-subtext);
  font-size: 80%;
  font-weight: 500;
  // margin: 0.5em 0 1em;
  margin: 0 0 1rem 0; 
  a {
    color: var(--color-subtext);
    text-decoration: none;
    font-weight: 500;
    border: 0;
  }
}

#footer {
  margin: 200px 0 0 0;
  font-size: 1.5em; 
  nav {
    ul {
      list-style-type: none;
      margin: 0;
      padding: 0; 
      li {
        a {
          border: 0;
        }
      }
      @media screen and (min-width: 600px) {
        -webkit-column-count: 2; /* Safari and Chrome */
        -moz-column-count: 2; /* Firefox */
        column-count: 2; /* CSS3 */
      }
      padding: 0; 
      @media screen and (min-width: 768px) {
        -webkit-column-count: 3; /* Safari and Chrome */
        -moz-column-count: 3; /* Firefox */
        column-count: 3; /* CSS3 */
      } 
    } 
  }

  .webrings {
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--color-subtext);
    margin-top: 100px;
    a {
      color: var(--color-subtext);
      font-weight: 500;
      text-decoration: none;
      border: 0;
    }
  }
}

.subtext {
  color: var(--color-smoke);
}

.text-end {
  text-align: right !important;
}
.journal {
  article {
    margin-bottom: 100px;
  }
}

// header {

//   a { 
//     color: var(--color-primary);
//     border-bottom: 0; 
//     background: 0;
//     &:after {
//       content: ""
//     }
//   }
// }
 

blockquote {
  padding: 0 1.5em;
  margin: 1rem 0;
  font-size: 0.88em;
  border-left: 5px solid rgba(var(--color-subtext),0.2);

  p {
    margin: 0;
  }
}

 p {
  margin: 0 0 1rem 0;
 }

hr {
  width: 100%;
  border: 0;
  height: 1px;
  margin: 1.5em 0;
  background: var(--color-border);
  &.small {
    width: 100px;
    margin: 0 auto;
  }
} 
a {
  transition: background 300ms; 
  text-decoration: none;
  color: var(--color-primary);
  border-bottom: 2px solid var(--color-primary);
  font-weight: 500;   
  padding: 0;
  // &:after {
  //   position: relative;
  //   top: -0.5em;
  //   font-size: 0.7em;
  //   content: "â†—";
  //   color: #aaaaaa;
  // }
  &.internal-link, :not([target=_blank])
   {
    color: var(--color-primary); 
  }     
  &.internal-link:after,
  &.footnote:after,
  &.reversefootnote:after {
    content: "";
  }
} 

p {
  a {
    border-bottom: 2px solid var(--color-primary);
    font-weight: 500;   
    text-decoration: none;
  }
}

h1 {
  a {
    border: 0;
  }
}

.h-card {
  font-size: 100%;
  margin-bottom: 100px;
  font-weight: 500;
  a {
    border: 0;
  }
}


*:focus {
  // background: #ffe8bc !important;
  // color: black !important;
}

.backlink-box {
  background: var(--color-box-background);
  padding: 1em;
  border-radius: var(--border-radius);
}

code {
  background: #f5f5f5;
  padding: 0.1em 0.2em;
  border-radius: 4px;
}

.invalid-link {
  color: #444444;
  cursor: help;
  background: #fafafa;
  padding: 0 0.1em;
}

.invalid-link-brackets {
  color: #ccc;
  cursor: help;
}

 
 
h1, h2, h3, h4, h5, h6 {
  // font-size: 100%;
  font-weight: 500;
  color: var(--color-primary);
  line-height: 1.3;
  a {
    font-weight: 500;
  }
} 

.note { 
  header {margin-bottom: 50px;}
  footer {
    margin-top: 100px;
  }
}

main {
  margin: 100px 0;
}
 

article {
  header { 
    .meta {
      font-size: 0.8rem;
      color: var(--color-subtext);
      font-weight: 500;
      time {
        font-size: 100%;
        display: inline;
      }
      a {
        color: var(--color-subtext);
        border: 0;
      } 
    } 
    a { 
      border: 0;
    } 
  }
  h3 {
    margin-top: 2rem;
  }
}
 

.categories {    
  -webkit-columns: 4;
  -moz-columns: 4;
  columns: 4;
  // -webkit-column-gap: 2em;
  // -moz-column-gap: 2em;
  // column-gap: 2em; 
   
  ul {
    li {
      ul {
        
      }
    }
  }
  // h3 {
  //   margin: 0;
  // }
}


img {
  max-width: 100%;
  height: auto;
  border-radius: 5px;
}


figure {
  padding: 0;
  margin: 3rem 0;
  position: relative;
  img {
    margin: 0;
  }
  figcaption { 
    // color: var(--color-subtext);
    font-size: 80%;
  }
}

strong, b {
  font-weight: 500;
} 

iframe {
  .sidenote,
  .marginnote {
    display: none;
  }
}


figcaption,
.sidenote,
.marginnote {
  a { 
    // color: var(--color-subtext);
    // border-bottom: 1px solid var(--color-primary);
    background: 0;
  }
}



.sidenote, .marginnote { 

  color: var(--color-subtext);


  @media screen and (min-width: 1200px) {
    position: absolute; 
    right: 0;
    // float: right;
    // clear: right;
    // margin-right: 45%;
    margin-right: -300px;
    width: 200px;
    margin-top: 0;
    margin-bottom: 1.96rem;
  } 
  // color: var(--color-subtext);
  font-size: 80%;
  line-height: 1.96; //changed to bring line heights into rational pattern
  vertical-align: baseline; 
}


// li .sidenote, 
// li .marginnote { 
//   margin-right: -80%; 
// } //added to allow for the fact that lists are indented and marginnotes and sidenotes push to right

// blockquote .sidenote, 
// blockquote .marginnote { 
//   margin-right: -79% 
// }

.sidenote-number { 
  counter-increment: sidenote-counter;  
}

.sidenote-number:after, 
.sidenote:before { 
  content: counter(sidenote-counter) " ";
    position: relative;
    vertical-align: baseline; 
  }

.sidenote-number:after { 
  content: counter(sidenote-counter);
  font-size: .6rem;
  top: -0.5rem;
  left: 0.1rem;  

//   background: var(--color-snow);
//   font-weight: 500;
//   width: 15px;
//   height: 15px;
//   text-align: center;
//   display: inline-block;
//   line-height: 15px;
//   border-radius: 50%;
}

.sidenote:before { 
  content: counter(sidenote-counter) ".\000a0"; // this is unicode for a non-breaking space
top: 0rem; 
} //removed superscripting for numerical reference in sidenote

// p, footer, 
// div.table-wrapper,
// .MJXc-display, 
// .MathJax { 
//   width: 55%; 
// }

// div.table-wrapper, table { 
//   overflow-x: auto; 
// } //changed all overflow values to 'auto' so scroll bars appear only as needed

// @media screen and (max-width: 760px) { 
//   p, footer { width: 90%; }
//   pre code { width: 87.5%; }
//   ul { width: 85%; }
//   figure { max-width: 90%; }
//   figcaption, 
//   figure.fullwidth figcaption { 
//     margin-right: 0%;
//     max-width: none;
//   }
  
//   blockquote p, 
//   blockquote footer,
//   div.epigraph > blockquote > footer,
//   .MJXc-display { 
//     width: 80%;
//     padding-left: 5%;
//     padding-right: 5%;
//   }
// }

// .marginnote code, 
// .sidenote code { 
//   font-size: 1rem; 
// } //more .code class removal

// pre { width: 52.5%; //, pre code, p pre code are both selectors in tufte.css - they have been removed here to fix alignment issues
// padding-left: 2.5%;
// overflow-x: auto; }

// .fullwidth, li.listing div{ max-width: 90%; }

// .full-width { 
//   .sidenote, 
//   .sidenote-number, 
//   .marginnote { 
//     display: none; 
//   }
// }

// span.newthought { 
//   font-variant: small-caps);
//   font-size: 1.2em;
//   letter-spacing: 0.05rem; 
// }

input.margin-toggle { display: none; }

label.sidenote-number { display: inline; }

label.margin-toggle:not(.sidenote-number) { display: none; }

@media (max-width: 1199px) { 
      label.margin-toggle:not(.sidenote-number) { 
        display: inline; 
        color: var(--color-subtext);
      }
     .sidenote, .marginnote { display: none; }
     .margin-toggle:checked + .sidenote,
     .margin-toggle:checked + .marginnote { display: block;
                                            float: left;
                                            left: 1rem;
                                            clear: both;
                                            width: 95%;
                                            margin: 1rem 2.5%;
                                            vertical-align: baseline;
                                            position: relative; }
     label { cursor: pointer; }
     pre, pre code, p code, p pre code { width: 90%;
                padding: 0; }
     .table-caption { display: block;
                      float: right;
                      clear: both;
                      width: 98%;
                      margin-top: 1rem;
                      margin-bottom: 0.5rem;
                      margin-left: 1%;
                      margin-right: 1%;
                      vertical-align: baseline;
                      position: relative; }
     div.table-wrapper, table, table.booktabs { width: 85%; }
     div.table-wrapper { border-right: 1px solid #efefef; }
     img { max-width: 100%; } 
     figcaption.maincolumn-figure, figure.fullwidth figcaption { float:none; text-align: center;}
     figure.fullwidth figcaption { margin-left: 0; }
   }
/*--- End of Basic Layout stuff from tufte.css ---*/



.links {
  a {
    background: 0;
    border: 0;
  }
  ul {
    margin: 0;
    padding: 0;
    list-style-type: none;
    li {
      margin-top: 2rem;
      svg {
        height: 15px !important;
        width: 15px !important;
        margin-right: .7rem;
        path {
          fill: var(--color-subtext);
        }
      }
    }
  }
  .attribution {
    font-size: .8rem;
    color: var(--color-subtext);
    font-weight: normal;
    display: inline-block;
    margin-left: .7rem;
  }
}

table {
  border: 1px solid var(--color-snow);
  padding: 10px;
  border-radius: 5px;
  thead {  
    color: var(--color-subtext);
    text-align: left;
    th {
      font-weight: 400;
    }
  }
  td {
    padding: 5px;
  }
}

.alphabet {
  svg {
    margin-top: 15px;
  }
}

.breakout { 
    position: relative; 
  left: 0; 
  width: calc(100vw - 200px); 
}
 


#header {
  margin-bottom: 100px;
}

.fixed-content {
  content {
    height: 100vh;
    // background: pink;
    width: 100%;
    position: fixed;
  }
}

.form-label {
  display: block;
  margin-bottom: .5rem;
}

.form-control {
  display: block;
  width: 100%;
  border: 1px solid var(--color-border);
  padding: .5rem;
}

#notes-entry-container {
  position: relative;
}


.toc {
  font-size: 0.8rem;
  position: absolute;
  top: 0;
  left: 0;
  margin-left: -320px;
  width: 150px;
  color: var(--color-subtext);
  display: none;
  @media screen and (min-width: 1400px) {
    display: block;
  }

  a {
    color: var(--color-subtext);
    border: 0;
  }
}

.toc-content {
  position: fixed;
}





.implied { 
  position: relative;
  border-radius: 5px;
  padding: 1.2rem 1.4rem;
  background: var(--color-snow);
  margin-bottom: 3rem;
  .title {
    text-transform: uppercase;
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--color-subtext);
    display: inline-block;
    margin-right: .8rem;
  } 
  .content { 
    font-size: 0.8rem; 
  } 
}


.tbc {
  font-size: 0.8rem;
  text-align: center;
  color: var(--color-subtext);
  padding: 0 20%;
  border-top: 1px solid var(--color-snow);
  padding-top: 100px;
  margin-top: 50px;
}