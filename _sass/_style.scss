// @import "../_sass/tufte";

$color-primary: #1F2D3D;
$color-text:  #3C4858;
$color-subtext: #8492A6;
$color-link-internal: #1FB6FF;
$color-link-external: #FF49DB;
$color-snow: #E0E6ED;
$color-border: $color-snow;
$color-light: #fbfbfb;
$color-box-background: mix($color-primary, white, 4%);
$border-radius: 4px;
$font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";

@media (prefers-color-scheme: dark) {

}

body, html {
  font-size: 20px;
}
  
body {
  font-family: $font-family; 
  background: $color-light;
  box-sizing: content-box; 
  line-height: 1.7; 
  overflow-x: hidden;
  color: $color-text;
  font-size: 1rem; 
  -webkit-font-smoothing: antialiased;
  padding: 30px; 
  counter-reset: sidenote-counter; 
  @media (min-width: 600px) {
    padding: 100px;
  }
  @media (min-width: 1200px) {
    padding: 100px;
    max-width: calc(50% - 100px);
  }
  @media (min-width: 1600px) {
    padding: 100px;
    max-width: 700px;
  }
}

section {
  margin-top: 100px;
}

.break-out {
  position: relative;
  right: 0%;
  left: 0%;
  margin-left: -0vw;
  margin-right: -0vw;
  max-width: 100vw;
  width: 100vw;
}

time {
  display: block;
  color: $color-subtext;
  margin: 0.5em 0 1em;
}

footer {
  margin: 100px 0;
  font-size: 0.8em;
  color: $color-subtext;
  padding-top: 1em;
  a { 
    color: $color-subtext;
    border-bottom: 1px solid $color-subtext; 
    background: 0;
    &:after {
      content: ""
    }
  }
}

.webrings {
  margin-top: 50px;
  a {
    border: 0;
    font-weight: normal !important;
  }
}
.journal {
  article {
    margin-bottom: 200px;
  }
}

header {

  a { 
    color: $color-primary;
    border-bottom: 0; 
    background: 0;
    &:after {
      content: ""
    }
  }
}
 

blockquote {
  padding: 0 1.5em;
  margin: 1rem 0;
  font-size: 0.88em;
  border-left: 5px solid rgba($color-subtext,0.2);

  p {
    margin: 0;
  }
}

hr {
  width: 100%;
  border: 0;
  height: 1px;
  margin: 3em 0;
  background: $color-border;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  color: $color-primary;
  line-height: 1.3;
  margin-bottom: 0;
  padding-bottom: 0;
  font-weight: normal;
}

a {
  transition: background 300ms; 
  text-decoration: none;
  color: $color-primary;
  font-weight: normal; 
  font-weight: 500; 
  background: rgba($color-link-external,0.1);
  border-bottom: 3px solid $color-link-external;
  // &:after {
  //   position: relative;
  //   top: -0.5em;
  //   font-size: 0.7em;
  //   content: "â†—";
  //   color: #aaaaaa;
  // }
  &.internal-link {
    color: $color-primary;
    background: rgba($color-link-internal,0.1);
    border-bottom: 3px solid $color-link-internal;
  }     
  &.internal-link:after,
  &.footnote:after,
  &.reversefootnote:after {
    content: "";
  }
} 


*:focus {
  // background: #ffe8bc !important;
  // color: black !important;
}
 

// #notes-entry-container {
//   display: grid;
//   grid-gap: 2em;
//   grid-template-areas:
//     "content"
//     "side";

//   @media (min-width: 700px) {
//     grid-template-columns: 3fr 1fr;
//     grid-template-areas: "content side";
//   }
// }

.backlink-box {
  background: $color-box-background;
  padding: 1em;
  border-radius: $border-radius;
}

code {
  background: #f5f5f5;
  padding: 0.1em 0.2em;
  border-radius: 4px;
}

.invalid-link {
  color: #444444;
  cursor: help;
  background: #fafafa;
  padding: 0 0.1em;
}

.invalid-link-brackets {
  color: #ccc;
  cursor: help;
}

 
 
h1, h2, h3, h4, h5, h6 {
  font-size: 100%;
  font-weight: 500;
} 

.note {
  margin: 100px 0;
  header {margin-bottom: 50px;}
  side {
    margin-top: 100px;
  }
}
main {
  margin: 200px 0;
}

.journal {
  article {
    margin-bottom: 200px;
  }
}


article {
  h3 {
    margin-top: 2rem;
  }
}
 

.categories {    
  -webkit-columns: 4;
  -moz-columns: 4;
  columns: 4;
  // -webkit-column-gap: 2em;
  // -moz-column-gap: 2em;
  // column-gap: 2em; 
   
  ul {
    li {
      ul {
        
      }
    }
  }
  // h3 {
  //   margin: 0;
  // }
}


img {
  max-width: 100%;
  height: auto;
  border-radius: 5px;
}


figure {
  padding: 0;
  margin: 3rem 0;
  position: relative;
  img {
    margin: 0;
  }
  figcaption { 
    color: $color-subtext;
    font-size: 80%;
  }
}

strong, b {
  font-weight: 500;
} 

iframe {
  .sidenote,
  .marginnote {
    display: none;
  }
}


figcaption,
.sidenote,
.marginnote {
  a { 
    color: $color-subtext;
    border-bottom: 1px solid $color-subtext;
    background: 0;
  }
}



.sidenote, .marginnote { 


  @media screen and (min-width: 1200px) {
    position: absolute; 
    right: 0;
    // float: right;
    // clear: right;
    // margin-right: 45%;
    margin-right: 250px;
    width: 250px;
    margin-top: 0;
    margin-bottom: 1.96rem;
  } 
  color: $color-subtext;
  font-size: 80%;
  line-height: 1.96; //changed to bring line heights into rational pattern
  vertical-align: baseline; 
}


// li .sidenote, 
// li .marginnote { 
//   margin-right: -80%; 
// } //added to allow for the fact that lists are indented and marginnotes and sidenotes push to right

// blockquote .sidenote, 
// blockquote .marginnote { 
//   margin-right: -79% 
// }

.sidenote-number { 
  counter-increment: sidenote-counter;  
}

.sidenote-number:after, 
.sidenote:before { 
  content: counter(sidenote-counter) " ";
    position: relative;
    vertical-align: baseline; 
  }

.sidenote-number:after { 
  content: counter(sidenote-counter);
  font-size: .6rem;
  top: -0.5rem;
  left: 0.1rem;  

//   background: $color-snow;
//   font-weight: 500;
//   width: 15px;
//   height: 15px;
//   text-align: center;
//   display: inline-block;
//   line-height: 15px;
//   border-radius: 50%;
}

.sidenote:before { 
  content: counter(sidenote-counter) ".\000a0"; // this is unicode for a non-breaking space
top: 0rem; 
} //removed superscripting for numerical reference in sidenote

// p, footer, 
// div.table-wrapper,
// .MJXc-display, 
// .MathJax { 
//   width: 55%; 
// }

// div.table-wrapper, table { 
//   overflow-x: auto; 
// } //changed all overflow values to 'auto' so scroll bars appear only as needed

// @media screen and (max-width: 760px) { 
//   p, footer { width: 90%; }
//   pre code { width: 87.5%; }
//   ul { width: 85%; }
//   figure { max-width: 90%; }
//   figcaption, 
//   figure.fullwidth figcaption { 
//     margin-right: 0%;
//     max-width: none;
//   }
  
//   blockquote p, 
//   blockquote footer,
//   div.epigraph > blockquote > footer,
//   .MJXc-display { 
//     width: 80%;
//     padding-left: 5%;
//     padding-right: 5%;
//   }
// }

// .marginnote code, 
// .sidenote code { 
//   font-size: 1rem; 
// } //more .code class removal

// pre { width: 52.5%; //, pre code, p pre code are both selectors in tufte.css - they have been removed here to fix alignment issues
// padding-left: 2.5%;
// overflow-x: auto; }

// .fullwidth, li.listing div{ max-width: 90%; }

// .full-width { 
//   .sidenote, 
//   .sidenote-number, 
//   .marginnote { 
//     display: none; 
//   }
// }

// span.newthought { 
//   font-variant: small-caps;
//   font-size: 1.2em;
//   letter-spacing: 0.05rem; 
// }

input.margin-toggle { display: none; }

label.sidenote-number { display: inline; }

label.margin-toggle:not(.sidenote-number) { display: none; }

@media (max-width: 1199px) { label.margin-toggle:not(.sidenote-number) { display: inline; color: $color-subtext; }
     .sidenote, .marginnote { display: none; }
     .margin-toggle:checked + .sidenote,
     .margin-toggle:checked + .marginnote { display: block;
                                            float: left;
                                            left: 1rem;
                                            clear: both;
                                            width: 95%;
                                            margin: 1rem 2.5%;
                                            vertical-align: baseline;
                                            position: relative; }
     label { cursor: pointer; }
     pre, pre code, p code, p pre code { width: 90%;
                padding: 0; }
     .table-caption { display: block;
                      float: right;
                      clear: both;
                      width: 98%;
                      margin-top: 1rem;
                      margin-bottom: 0.5rem;
                      margin-left: 1%;
                      margin-right: 1%;
                      vertical-align: baseline;
                      position: relative; }
     div.table-wrapper, table, table.booktabs { width: 85%; }
     div.table-wrapper { border-right: 1px solid #efefef; }
     img { max-width: 100%; } 
     figcaption.maincolumn-figure, figure.fullwidth figcaption { float:none; text-align: center;}
     figure.fullwidth figcaption { margin-left: 0; }
   }
/*--- End of Basic Layout stuff from tufte.css ---*/



.links {
  a {
    background: 0;
    border: 0;
  }
  ul {
    margin: 0;
    padding: 0;
    list-style-type: none;
    li {
      margin-top: 2rem;
      svg {
        height: 15px !important;
        width: 15px !important;
        margin-right: .7rem;
        path {
          fill: $color-subtext;
        }
      }
    }
  }
  .attribution {
    font-size: .8rem;
    color: $color-subtext;
    font-weight: normal;
    display: inline-block;
    margin-left: .7rem;
  }
}

table {
  border: 1px solid $color-snow;
  padding: 10px;
  border-radius: 5px;
  thead {  
    color: $color-subtext;
    text-align: left;
    th {
      font-weight: 400;
    }
  }
  td {
    padding: 5px;
  }
}

.alphabet {
  svg {
    margin-top: 15px;
  }
}

.breakout { 
    position: relative; 
  left: 0; 
  width: calc(100vw - 200px); 
}